#include <iostream>
#include <vector>
#include <string>
using namespace std;

void render(vector<vector<string>> v)
{
    for(int i = 0; i < v.size(); i++)
    {
        for(int j = 0; j < v.size(); j++)
        {
            cout<<v[i][j];
            if (j < v.size() - 1){
                cout<<"|";
            }
        }
        cout<<endl;
        if(i < v.size() - 1)
            cout<<"  _  _  _ "<<endl;
    }
}

int win(vector<vector<string>> v, string litera)
{
    int i = 0; int j = 0;
    int won = false;
    while(!won)
    {
        if(v[0][0] == litera && v[0][1] == litera && v[0][2] == litera)
            won = true;
        else if(v[1][0] == litera && v[1][1] == litera && v[1][2] == litera)
            won = true;
        else if(v[2][0] == litera && v[2][1] == litera && v[2][2] == litera)
            won = true;
        else if(v[0][0] == litera && v[1][0] == litera && v[2][0] == litera)
            won = true;
        else if(v[0][1] == litera && v[1][1] == litera && v[2][1] == litera)
            won = true;
        else if(v[0][2] == litera && v[1][2] == litera && v[2][2] == litera)
            won = true;
        else if(v[0][0] == litera && v[1][1] == litera && v[2][2] == litera)
            won = true;
        else if(v[0][2] == litera && v[1][1] == litera && v[2][0] == litera)
            won = true;
    }

    if(won)
    {
        cout<< litera + " a castigat!";
        return 1;
    }
    else
        return 0;
    /*string x = " X ";
    string o = " O ";
    int ix = 0;
    int io = 0;
    int i = 0;
    int j = 0;
    string p = "";

    for(i = 0; i < v.size(); i++)
    {
        p = v[i][j];
        if(p == x)
            ix++;
        else if(p == o)
            io++;
        else
            continue;

    }
    cout<<ix<<" "<<io<<endl;*/

}


void input(int z, int &a, int &b, string player)
{
    cout<<"pozitia pentru" + player + ": ";
    cin>>z;

    switch(z)
    {
        case 1:
            a = 2;
            b = 0;
            break;
        case 2:
            a = 2;
            b = 1;
            break;
        case 3:
            a = 2;
            b = 2;
            break;
        case 4:
            a = 1;
            b = 0;
            break;
        case 5:
            a = 1;
            b = 1;
            break;
        case 6:
            a = 1;
            b = 2;
            break;
        case 7:
            a = 0;
            b = 0;
            break;
        case 8:
            a = 0;
            b = 1;
            break;
        case 9:
            a = 0;
            b = 2;
            break;
        default:
            cout<<"Numar invalid!"<<endl;
            cout<<"pozitia pentru" + player + ": ";
            cin>>z;
            input(z , a , b, player);
    }

}

int finish(vector<vector<string>> v)
{
    int nr;
    for(int i = 0; i < v.size(); i++)
    {
        for(int j = 0; j < v.size(); j++)
        {
            if(v[i][j] == " X " || v[i][j] == " O ");
                nr++;
        }
    }
    return nr;
}

int main()
{
    vector<vector<string>> v
    {
        {"   ", "   ", "   "},
        {"   ", "   ", "   "},
        {"   ", "   ", "   "}
    };

    render(v);
    string player = " X ";
    int playerX, playerO;
    int n = 0;
    int z = 0 , a , b;

    while(n < 9)
    {
        if(playerX == playerO)
        {
            player = " X ";
            playerX++;
        }
        else
        {
            player = " O ";
            playerO++;
        }
        input(z, a, b , player);
        v[a][b] = player;
        render(v);
        if(playerX >= 3 || playerO >= 3)
        {
            if(win(v, " X ") == 1){
                cout<< "X a castigat"<<endl;
            }
            if(win(v, " O ") == 1);
                cout<< "O a castigat"<<endl;

        }
        n++;

    }


    return 0;
}
